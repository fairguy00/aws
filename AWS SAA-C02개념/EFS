EFS(Elastic File System)

1. 스토리지 서비스 비교
-S3: 오브젝트 스토리지. 리전에 설치, HTTP에 의한 API를 통한 접근, 대용량의 데이터를 장기 보존목적.
-ESB:블록 스토리지. AZ에 설치. EC2 인스턴스의 디스크 볼륨으로서 이용하지만 물리적으로는 접근 불가능하고 네트워크를 통해서 이용. 여러 EC2 인스턴스에 붙일수 없다.(기본 1:1로 연결하고, 필요시엔 옮겨 연결해야함)
-EFS:NAS와 유사한 파일스토리지. 파일 시스템으로 이용하고, 여러개의 EC2 인스턴스에서 공유 접근 가능하나 인터넷으로 직접 접속할 수 없다.

2. EFS 개요
-여러개의 EC2인스턴스에서 접근 가능한 공유 스토리지
-풀 관리형 서비스
-네트워크 파일 시스템 버전4(NFSv40) 프로토콜을 이용하여 관련 툴이나 표준프로토콜/API로 액세스 가능
-페타바이트까지 데이터를 축적가능
-쓰루풋/IOPS 성능으로 자동스케일링하여 저지연성을 유지
-파일량 감소에 맞춰 자동으로 확장 및 축소
-사전 용량 설정 필요 없음
-종량 과금
-사용예:
여러 인스턴스에서 동시 접속이 필요할때
수초 단위로 데이터 추가가 필요할때
응용 프로그램의 공유 디렉토리로 이용가능
빅데이터 등의 분산 병렬처리 환경에서의 공유 데이터 액세스 스토리지로 이용
콘텐츠 공유 저장소로 이용가능

3. EFS 설정
-파일시스템 작성 -> 접속하는 쪽에서 마운트 타겟 설정 -> 시큐리티 그룹작성 -> 퍼포먼스 모드 선택

4. 파일시스템
-EFS의 관리 단위. 파일 및 디렉토리의 보관장소. 1개의 AWS계정으로 여러 개의 파일 시스템을 만들 수 있다.

5. 마운트 타겟
-VPC내의 AZ에 있는 접속처를 두고
-EC2 인스턴스는 같은 AZ 내에 있는 마운트 타겟에 접속가능함
-고정된 DNS 이름과 IP줏를 가짐
-파일 시스템 DNS 이름을 사용하여 마운트함으로써 자동으로 IP주소를 부여

6. 퍼포먼스 모드(범용모드, 최대 I/O 모드)
-범용모드: 일반적인 용도를 상정한 모드
기본값 - 지연성이 가장낮음. 초당 파일 시스템 조작은 7000으로 제한.
-최대 I/O 모드:
수십~몇천 명의 클라이언트로 부터의 동시 액세스가 필요한 대규모 구축에 이용
합계 스루풋을 우선하여 스케일링을 실시함.
지연성이 다소 높아짐.

7. 버스트 기능
-파일 스토리지의 부하에 따라 버스트 기능을 통해 스케일링 가능
-사용례: NFS 서버 용량 증대에 따른 스루풋 성능 확장이 필요한 경우, 일시적인 피크 시의 부하가 증대될 가능성이 있는 경우
-버스트 스루풋모드: 파일 시스템이 커짐에 ㄸ라  Amazon EFS를 통해 스루풋이 확장됨
-크레딧 시스템: 크레딧 시스템에 의해 파일 시스템이 버스트할 수 있는 시기를 판단. 각 파일 시스템은 시간이 지남에 따라
크레딧을 축적해 나가며 데이터를 읽고 쓸 때마다 크레딧을 사용함.

8. EFS클라이언트
-EFS를 EC2 인스턴스에서 조작할 때 전용 클라이언트 소프트웨어를 이용해야함.
-EFS 마운트 헬퍼(Amazon-efs-utils), Linux NFSv4 클라이언트

9. 프로비전드 스루풋
-버스트의 스루풋: 피크시에 크레딧을 소비하고 버스트를 실행하여 일시적인 성능을 향상시키는 방식. 최대 스루풋과 버스트 시간에 제한이 있다.
스루풋 성능 향상을 위해서는 스토리지 용량의 증대가 필요.
-프로비전드 스루풋: 일관된 스루풋을 사전에 설정하는 방식. API/AWS CLI/매니지먼트 콘솔을 통해 제어. 하루에 1회에 한해 스루풋 성능을 감소시킬수 있다.

10. FSx타입의 파일 스토리지
-EFS:NAS와 유사한 파일 스토리지. 파일 시스템을 이용하여 여러 EC2 인스턴스로 공유 접근 가능. S3와 달리 인터넷으로 직접 접속할 수 없음.
-Amazon FSx For Windows File Server: Windows File Server와 호환되는 스토리지. Windows 상에 구축되어 Windows AD, OS 및 소프트웨어와의 연계가 풍부하게 가능.
-Amazon FSx For Lustre: 분산형 파일 스토리지 오픈소스 Luster와 호환되는 분산형 고속 스토리지. 기계학습 등의 고속 컴퓨팅 데이터 레이어에 이용하는 임시저장 처리용 스토리지.

11. Amaxon FSx For Windows File Server 특징, 사용례
-Windows File Server를 클라우드로 이행할 때
-Active Directory(AD) 통합 등의 폭넓은 관리 기능
-SMB 프로토콜을 통해 Amazon EC2, VMware Cloud on AWS, Amaxon WorkSpaces, Amaxo AppStream 2.0 인스턴스 등 폭넓게 연결 가능
-최대 수천대의 컴퓨팅 인스턴스에서 접근 가능

12. Amazon FSx For Lustre 특징, 사용례
-많은 수퍼컴퓨터에 이용되는 분산 파일 시스템
-풀매니지드형으로 안전하게 Lustre 이용
-최적 용량 3600GB
-최대 수백 GB / 초의 스루풋
-수백만 IOPS까지 스케일 가능